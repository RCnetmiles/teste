<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo de Rotulagem Química</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: monospace;
            background-color: #f0f0f0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }
        #top-section {
            height: 50vh;
            background-color: #ddd;
            display: flex;
            justify-content: center;
            align-items: center;
            border-bottom: 2px solid #000;
        }
        #product-display {
            width: 80%;
            height: 80%;
            background-color: #fff;
            border: 1px solid #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        #bottle {
            width: 100px;
            height: 200px;
            background-color: #ccc;
            border: 1px solid #000;
            border-radius: 10px 10px 0 0;
            position: relative;
        }
        #bottle::before {
            content: '';
            position: absolute;
            top: -20px;
            left: 40px;
            width: 20px;
            height: 20px;
            background-color: #ccc;
            border: 1px solid #000;
            border-radius: 50%;
        }
        #label {
            position: absolute;
            top: 50px;
            left: 10px;
            width: 80px;
            height: 100px;
            background-color: #fff;
            border: 1px solid #000;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            padding: 5px;
        }
        .pictogram {
            width: 30px;
            height: 30px;
            margin: 2px;
            background-size: cover;
        }
        #bottom-section {
            height: 50vh;
            display: flex;
            flex-direction: column;
            padding: 10px;
        }
        #controls {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        #menu-button {
            background-color: #007bff;
            color: white;
            padding: 10px;
            text-align: center;
            cursor: pointer;
        }
        #pictograms-area {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 10px 0;
        }
        .pictogram-option {
            width: 40px;
            height: 40px;
            margin: 5px;
            background-size: cover;
            cursor: pointer;
            border: 1px solid #000;
        }
        .selected {
            border: 2px solid red;
        }
        #containers {
            display: flex;
            justify-content: center;
            margin: 10px 0;
        }
        .container-option {
            padding: 10px;
            margin: 0 10px;
            border: 1px solid #000;
            cursor: pointer;
        }
        #store-button {
            background-color: #28a745;
            color: white;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            margin-top: 10px;
        }
        #modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
        }
        #modal-content {
            background-color: #fff;
            padding: 20px;
            border: 1px solid #000;
            max-width: 80%;
            overflow-y: auto;
        }
        #close-modal {
            float: right;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="top-section">
        <div id="product-display">
            <div id="bottle">
                <div id="label"></div>
            </div>
            <p id="product-name">Produto: Carregando...</p>
        </div>
    </div>
    <div id="bottom-section">
        <div id="controls">
            <div id="menu-button">Abrir Formulário</div>
            <div id="pictograms-area"></div>
            <div id="containers">
                <div class="container-option" data-type="vidro">Vidro</div>
                <div class="container-option" data-type="plastico">Plástico</div>
            </div>
            <div id="store-button">Armazenar</div>
        </div>
    </div>
    <div id="modal">
        <div id="modal-content">
            <span id="close-modal">X</span>
            <h2>Formulário do Produto</h2>
            <p id="form-description"></p>
        </div>
    </div>

    <script>
        // Dados dos produtos (5 exemplos)
        const products = [
            {
                name: "Álcool Etílico (Etanol)",
                description: "Substância inflamável, volátil, utilizada como solvente e desinfetante. Perigo: Inflamável. Recomendado recipiente de vidro. Pictogramas: Chama.",
                correctContainer: "vidro",
                correctPictograms: ["flame"]
            },
            {
                name: "Ácido Clorídrico",
                description: "Ácido forte, corrosivo para metais e tecidos. Perigo: Corrosivo. Recomendado recipiente de plástico. Pictogramas: Corrosão.",
                correctContainer: "plastico",
                correctPictograms: ["corrosion"]
            },
            {
                name: "Peróxido de Hidrogênio",
                description: "Agente oxidante, corrosivo em concentrações altas. Perigo: Oxidante e corrosivo. Recomendado recipiente de plástico. Pictogramas: Chama sobre círculo, Corrosão.",
                correctContainer: "plastico",
                correctPictograms: ["flame-over-circle", "corrosion"]
            },
            {
                name: "Formaldeído",
                description: "Substância tóxica, carcinogênica, utilizada em preservação. Perigo: Tóxico agudo, carcinogênico. Recomendado recipiente de vidro. Pictogramas: Caveira e ossos cruzados, Perigo à saúde.",
                correctContainer: "vidro",
                correctPictograms: ["skull", "health-hazard"]
            },
            {
                name: "Acetona",
                description: "Solvente orgânico inflamável. Perigo: Inflamável e irritante. Recomendado recipiente de vidro. Pictogramas: Chama, Ponto de exclamação.",
                correctContainer: "vidro",
                correctPictograms: ["flame", "exclamation"]
            }
        ];

        // Pictogramas disponíveis (usando placeholders; em produção, use URLs reais de imagens GHS)
        const pictograms = [
            { id: "flame", name: "Chama", url: "https://via.placeholder.com/30?text=Flame" },
            { id: "corrosion", name: "Corrosão", url: "https://via.placeholder.com/30?text=Corrosion" },
            { id: "flame-over-circle", name: "Oxidante", url: "https://via.placeholder.com/30?text=Oxidant" },
            { id: "skull", name: "Tóxico", url: "https://via.placeholder.com/30?text=Skull" },
            { id: "health-hazard", name: "Perigo à Saúde", url: "https://via.placeholder.com/30?text=Health" },
            { id: "exclamation", name: "Irritante", url: "https://via.placeholder.com/30?text=!" },
            { id: "environment", name: "Ambiental", url: "https://via.placeholder.com/30?text=Env" },
            { id: "gas-cylinder", name: "Gás", url: "https://via.placeholder.com/30?text=Gas" },
            { id: "exploding-bomb", name: "Explosivo", url: "https://via.placeholder.com/30?text=Bomb" }
        ];

        let currentProductIndex = 0;
        let selectedContainer = null;
        let selectedPictograms = [];
        let score = 0;

        function loadProduct() {
            if (currentProductIndex >= products.length) {
                alert(`Fim do jogo! Pontuação: \( {score}/ \){products.length}`);
                return;
            }
            const product = products[currentProductIndex];
            document.getElementById('product-name').textContent = `Produto: ${product.name}`;
            document.getElementById('form-description').textContent = product.description;
            resetSelections();
        }

        function resetSelections() {
            selectedContainer = null;
            selectedPictograms = [];
            document.querySelectorAll('.container-option').forEach(el => el.classList.remove('selected'));
            document.querySelectorAll('.pictogram-option').forEach(el => el.classList.remove('selected'));
            updateLabel();
        }

        function updateLabel() {
            const label = document.getElementById('label');
            label.innerHTML = '';
            selectedPictograms.forEach(id => {
                const pic = document.createElement('div');
                pic.className = 'pictogram';
                pic.style.backgroundImage = `url(${pictograms.find(p => p.id === id).url})`;
                label.appendChild(pic);
            });
            const bottle = document.getElementById('bottle');
            bottle.style.backgroundColor = selectedContainer === 'vidro' ? '#add8e6' : '#90ee90';
        }

        function initPictograms() {
            const area = document.getElementById('pictograms-area');
            pictograms.forEach(pic => {
                const div = document.createElement('div');
                div.className = 'pictogram-option';
                div.style.backgroundImage = `url(${pic.url})`;
                div.dataset.id = pic.id;
                div.addEventListener('click', () => {
                    const index = selectedPictograms.indexOf(pic.id);
                    if (index > -1) {
                        selectedPictograms.splice(index, 1);
                        div.classList.remove('selected');
                    } else {
                        selectedPictograms.push(pic.id);
                        div.classList.add('selected');
                    }
                    updateLabel();
                });
                area.appendChild(div);
            });
        }

        document.getElementById('menu-button').addEventListener('click', () => {
            document.getElementById('modal').style.display = 'flex';
        });

        document.getElementById('close-modal').addEventListener('click', () => {
            document.getElementById('modal').style.display = 'none';
        });

        document.querySelectorAll('.container-option').forEach(el => {
            el.addEventListener('click', () => {
                document.querySelectorAll('.container-option').forEach(e => e.classList.remove('selected'));
                el.classList.add('selected');
                selectedContainer = el.dataset.type;
                updateLabel();
            });
        });

        document.getElementById('store-button').addEventListener('click', () => {
            if (!selectedContainer || selectedPictograms.length === 0) {
                alert('Selecione recipiente e pictogramas!');
                return;
            }
            const product = products[currentProductIndex];
            let points = 0;
            if (selectedContainer === product.correctContainer) points += 0.5;
            const correctPics = product.correctPictograms.sort();
            const selectedSorted = selectedPictograms.sort();
            if (correctPics.join(',') === selectedSorted.join(',')) points += 0.5;
            if (points === 1) score++;
            currentProductIndex++;
            loadProduct();
        });

        // Inicialização
        initPictograms();
        loadProduct();
    </script>
</body>
</html>
